
.unified-stream-row {
    display: flex;
    flex-direction: row; 
    align-items: stretch; 
    margin-bottom: 20px; 
}

.unified-memo-content {
    display: flex;
    flex-direction: column;
    gap: 15px; 
    padding: 0 20px; 
    flex: 1 1 650px; /* Allow it to grow, shrink, with a base of 650px */
    max-width: 650px; /* Limit its maximum width */
    padding-right: 10px;
}

.unified-right-side-content {
    flex: 0 0 350px; /* Fixed width of 350px, no grow or shrink */
    display: flex;
    flex-direction: column;
    gap: 12px; 
    padding: 0 20px; 
    position: relative; 
    /* width: 350px; REMOVED as flex-basis handles this */
}



.unified-dynamic-dots-before,
.unified-dynamic-dots-after {
    flex-grow: 1; 
    width: 2px; 
    background: repeating-linear-gradient(to bottom, var(--border-color) 0, var(--border-color) 3px, transparent 3px, transparent 8px);
    background-size: 2px 8px; 
    margin: 5px 0; 
    align-self: center; 
}

.unified-timestamp-marker-block {
    display: flex;
    flex-direction: column;
    align-items: center; 
    width: 100%;
    margin-bottom: 10px; 
    flex-grow: 1;
    margin-left: 0px; /* TEMP FIX */
}

.unified-time-display {
    background-color: var(--bg-color);
    padding: 5px 10px;
    font-size: 1rem;
    color: var(--text-muted-color);
    font-family: 'Fira Code', monospace;
    border-radius: 4px;
    border: 1px solid var(--border-color);
    white-space: nowrap;
    z-index: 1; 
}

.unified-dot { 
    width: 6px;
    height: 6px;
    background-color: var(--border-color);
    border-radius: 50%;
    margin: 4px 0;
    z-index: 1;
}


.stream-memo-item {
    background: var(--surface-color);
    border: 1px solid var(--border-color);
    padding: 10px 15px;
    border-radius: 8px;
    width: 100%;
    position: relative;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.stream-memo-actions {
    position: absolute;
    top: 5px;
    right: 5px;
    opacity: 0;
    transition: opacity 0.2s;
}
.stream-memo-item:hover .stream-memo-actions { opacity: 1; }

.stream-memo-content {
    
}

.stream-memo-tags {
    margin-top: 10px;
}

.stream-tag-pill {
    display: inline-block;
    background-color: var(--secondary-bg-color);
    color: var(--accent-color);
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.7rem;
    margin-right: 5px;
}

.right-side-item {
    display: flex;
    flex-direction: column;
    font-size: 0.85rem;
    line-height: 1.3;
    width: 310px; 
    text-align: left;
    background-color: var(--surface-color-light);
    padding: 3px 10px;
    border-radius: 6px;
    border: 1px solid var(--border-color);
}

/*  --- RIGHT SIDE FUTURISTIC + ANIMATION --- */
/* =========================================
   FUTURISTIC HUD ITEM (Holographic Style)
   ========================================= */

.right-side-item {
    /* 1. Layout & Dimensions */
    position: relative;
    display: flex;
    flex-direction: column;
    width: 370px;
    
    /* ADDED: Increased left padding to ensure text doesn't hit the angled bar */
    padding: 6px 16px 6px 20px; 
    
    margin-bottom: 0;
    gap: 4px;

    /* 2. The "Glass" Background */
    background: rgba(12, 18, 26, 0.1);
    backdrop-filter: blur(8px);
    
    /* 3. Borders & Shape */
    border: none; 
    box-shadow: 4px 10px 15px 5px rgba(0, 0, 0, 0.2);
    
    /* CHANGED: Removed standard left border to draw the custom shape instead */
    border-left: none; 
    
    border-radius: 0 6px 6px 0;

    /* 4. Typography */
    font-family: 'Segoe UI', Roboto, Helvetica, sans-serif;
    color: #a0b3c6;
    font-size: 0.85rem;
    line-height: 1.4;

    /* 5. HUD Corner Accents */
    background-image: 
        linear-gradient(to left, #4deeea 2px, transparent 2px),
        linear-gradient(to bottom, #4deeea 2px, transparent 2px),
        linear-gradient(to left, #d68c45 2px, transparent 2px),
        linear-gradient(to top, #d68c45 2px, transparent 2px);

    background-repeat: no-repeat;
    background-size: 8px 8px; 
    background-position: top 0 right 0, top 0 right 0, bottom 0 right 0, bottom 0 right 0;

    transition: all 0.2s ease;
    cursor: default;
}

/* === NEW: THE CUSTOM ANGLED LEFT BAR === */
.right-side-item::before {
    content: "";
    position: absolute;
    left: 0;
    bottom: 0;
    top: 0;
    width: 15px; /* Width needed to accommodate the slant */
    background-color: #d68c45; /* The Orange Status Color */
    
    /* 
       The Shape Logic:
       1. Bottom-Left: 0, 100%
       2. Bottom-Right (Thickness): 3px, 100%
       3. Mid-Right (Start of Angle): 3px, 50%
       4. Top-Right (End of Angle): 10px, 0% (Leans right)
       5. Top-Left (Thickness at top): 7px, 0%
       6. Mid-Left (Back to straight): 0, 50%
    */
    clip-path: polygon(
        0 100%, 
        1px 100%, 
        1px 50%, 
        18px 0, 
        17px 0, 
        0 50%
    );
    
    transition: background-color 0.2s;
}

/* Hover Effect */
.right-side-item:hover {
    background: linear-gradient(90deg, transparent 0%,transparent 85%, rgba(12, 18, 26, 0.95) 100%);
    border-color: rgba(77, 238, 234, 0.3);
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
    transform: translateX(2px);
}

/* Hover effect for the bar
/* --- End Right Side Futuristic + Animation ---  */


.rs-item-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    width: 100%;
}

.rs-timestamp {
    font-size: 11px;
    color: var(--text-muted-color);
    font-family: 'Fira Code', monospace;
    white-space: nowrap;
    margin-left: 8px;
    position: absolute;
    z-index: 100;
    right: 10px;
    bottom: 3px;
    padding: 3px;
    background: rgba(0, 0, 0, 0.249);
    color: #7db1ff;
}

.rs-title {
    color: var(--text-color);
    font-weight: 200;
    text-decoration: none;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex-grow: 1;
    min-width: 0;
    margin-left: 10px;
    font-family: 'Science Gothic';
    font-size: 14px;
    color: #eadaff;
}
.rs-title:hover { text-decoration: underline; }

.rs-url {
    font-size: 14px;
    color: #bbd;
    margin-top: -4px;
    max-width: 77%; 
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.empty-stream {
    text-align: center;
    padding: 50px;
    color: var(--text-muted-color);
    height: 100%;
}

/* --- MemoItem Base Styling (non-editing) --- */
.memo-item {
    position: relative;
    width: 100%;
    margin-bottom: 15px;
    padding: 15px 20px 15px 35px;
    
    background-color: #191c20;
    color: #e0e0e0;

    /* 1. Shape: Cut all 4 corners (20px size) */
    clip-path: polygon(
        20px 0, calc(100% - 20px) 0, 
        100% 20px, 100% calc(100% - 20px), 
        calc(100% - 20px) 100%, 20px 100%, 
        0 calc(100% - 20px), 0 20px
    );

    /* 2. Inner Border (Subtle Blue Grid Border) */
    box-shadow: inset 0 0 0 1px rgba(77, 238, 234, 0.2);

    /* 3. Tech Accents */
    background-image: 
        /* --- A. DIAGONAL CORNER BORDERS (The "Colored Corners") --- */
        /* Note: 20px corner -> ~14px distance to edge. 
           We draw from 13px to 16px to ensure it hits the edge without gaps. */
        
        /* Top-Left (Orange) */
        linear-gradient(135deg, transparent 13px, #d68c45 13px, #d68c45 16px, transparent 16px),
        /* Top-Right (Orange) */
        linear-gradient(225deg, transparent 13px, #d68c45 13px, #d68c45 16px, transparent 16px),
        /* Bottom-Right (Orange) */
        linear-gradient(315deg, transparent 13px, #d68c45 13px, #d68c45 16px, transparent 16px),
        /* Bottom-Left (Orange) */
        linear-gradient(45deg, transparent 13px, #d68c45 13px, #d68c45 16px, transparent 16px),

        /* --- B. CYAN BAR (Left) --- */
        linear-gradient(#4deeea, #4deeea),
        
        /* --- C. ORANGE BRACKETS (Right Side) --- */
        /* Top Right Bracket */
        linear-gradient(to left, #d68c45, #d68c45),   /* H-Line */
        linear-gradient(to bottom, #d68c45, #d68c45), /* V-Line */
        
        /* Bottom Right Bracket */
        linear-gradient(to left, #d68c45, #d68c45),   /* H-Line */
        linear-gradient(to top, #d68c45, #d68c45);    /* V-Line */

    background-repeat: no-repeat;
    
    /* 4. Sizing */
    background-size: 
        /* A. Diagonals: Coverage for corners (30px box is enough) */
        30px 30px, 30px 30px, 30px 30px, 30px 30px,
        
        /* B. Cyan Bar */
        2px 60%, 
        
        /* C. Brackets */
        40px 2px, 2px 40px, 
        40px 2px, 2px 40px;
        
    /* 5. Positioning */
    background-position: 
        /* A. Diagonals (One in each corner) */
        top left, top right, bottom right, bottom left,
        
        /* B. Cyan Bar (Left center) */
        15px center,
        
        /* C. Brackets (Offset by 20px to match the start of the straight edge) */
        top 0 right 20px, top 20px right 0,
        bottom 0 right 20px, bottom 20px right 0;

    /* Glow Effect */
    filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.5));
}
/* Memo Timestamp Styling */
.memo-timestamp {
    position: absolute;
    top: 12px;
    right: 42px;
    height: 26px;
    font-size: 0.75rem;
    color: var(--text-muted-color);
    background-color: rgba(0,0,0,0.7); /* To ensure visibility over memo content */
    padding: 2px 5px;
    border-radius: 4px;
    z-index: 10; /* Ensure it's above other content */
    color: #f0b962;
    z-index: 10;
    font-family: 'Fira Code';
    font-size: 15px;
}

/* --- MemoItem Editing Styles --- */
.memo-item.editing {
    padding: 15px; /* Adjust padding for editing view */
    background-color: var(--surface-color-light); /* Distinct background for editing */
    border: 1px solid var(--primary-color); /* Highlight editing state */
    box-sizing: border-box; /* Ensure padding is included in width calculation */
    margin-bottom: 15px; /* Maintain space below editing item */
}

.memo-item.editing .memo-edit-textarea {
    width: 100%;
    min-height: 200px; /* Increased min-height */
    height: auto;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    background-color: var(--bg-color);
    color: var(--text-color);
    font-family: 'Inter', sans-serif;
    font-size: 0.95rem;
    resize: vertical;
    box-sizing: border-box;
}

.memo-item.editing .edit-tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-bottom: 10px;
}

.memo-item.editing .edit-tags-container .tag-pill {
    display: inline-flex;
    align-items: center;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.8rem;
    background-color: var(--surface-color);
    border: 1px solid var(--border-color);
    color: var(--text-color);
}

.memo-item.editing .edit-tags-container .tag-remove-btn {
    background: none;
    border: none;
    color: var(--text-muted-color);
    margin-left: 5px;
    cursor: pointer;
    font-size: 0.9em;
    padding: 0;
}
.memo-item.editing .edit-tags-container .tag-remove-btn:hover {
    color: var(--text-color);
}


.memo-item.editing .memo-edit-buttons {
    display: flex;
    justify-content: flex-end; /* Align buttons to the right */
    gap: 10px;
    margin-top: 10px;
    width: 100%;
    box-sizing: border-box;
}

/* Apply futuristic style to buttons within editing mode */
.memo-item.editing .memo-edit-buttons .primary-button,
.memo-item.editing .memo-edit-buttons .secondary-button {
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: 500;
    
    /* Futuristic Button Style Overrides */
    border: 1px solid;
    border-image: linear-gradient(45deg, var(--primary-color), var(--accent-color)) 1;
    background-color: rgba(var(--primary-color-rgb), 0.1);
    box-shadow: 0 0 8px rgba(var(--primary-color-rgb), 0.5);
    transition: all 0.2s ease-in-out;
}

.memo-item.editing .memo-edit-buttons .primary-button:hover,
.memo-item.editing .memo-edit-buttons .secondary-button:hover {
    background-color: rgba(var(--primary-color-rgb), 0.2);
    box-shadow: 0 0 12px rgba(var(--primary-color-rgb), 0.7);
    transform: translateY(-1px);
}

/* --- Edit Time Specific Styles --- */
.memo-edit-time-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 15px;
    background-color: var(--surface-color-light);
    border: 1px solid var(--primary-color);
    border-radius: 8px;
    margin-top: 10px;
    box-sizing: border-box;
    width: 100%;
}

.memo-edit-time-container input[type="time"] {
    width: fit-content;
    padding: 8px 10px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    background-color: var(--bg-color);
    color: var(--text-color);
    font-size: 1rem;
    -webkit-appearance: none;
    appearance: none;
}
.memo-edit-time-container input[type="time"]::-webkit-calendar-picker-indicator {
    filter: invert(1);
}

.memo-edit-time-container .memo-edit-buttons {
    display: flex;
    justify-content: flex-end; /* Align buttons to the right */
    gap: 10px;
    width: 100%;
    box-sizing: border-box;
}

/* Ensure Save/Cancel buttons are consistently styled from general button classes */
.memo-edit-time-container .memo-edit-buttons .btn-primary {
    /* order: 2; - removed as flex-end handles order */
}
.memo-edit-time-container .memo-edit-buttons .btn-secondary {
    /* order: 1; - removed as flex-end handles order */
}

.unified-dynamic-dots-before,
.unified-dynamic-dots-after {
    flex-grow: 1;
    width: 2px;
    background: repeating-linear-gradient(to bottom, var(--border-color) 0, var(--border-color) 3px, transparent 3px, transparent 8px);
    background-size: 2px 8px;
    margin: 5px 0;
    align-self: center;
    min-height: 10px; /* Ensure dots always have some height */
}

/* --- Z-index fixes for dropdown menu --- */
.menu-container {
    position: relative; /* Ensure positioning context for absolute dropdown */
    z-index: 1001; /* Ensure dropdown is above most elements */
}

.dropdown-menu {
    position: absolute; /* Ensure it positions correctly relative to menu-container */
    top: 100%; /* Position below the trigger button */
    right: 0; /* Align to the right of the trigger */
    z-index: 1000; /* Ensure dropdown content is also high z-index */
    background-color: var(--surface-color); /* Ensure it has a background */
    border: 1px solid var(--border-color);
    border-radius: 4px;
    padding: 5px 0;
    min-width: 200px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    list-style: none; /* Remove list styling */
}

.dropdown-menu button {
    display: block;
    width: 100%;
    padding: 8px 15px;
    background: none;
    border: none;
    color: var(--text-color);
    text-align: left;
    cursor: pointer;
    font-size: 0.9rem;
}

.dropdown-menu button:hover {
    background-color: var(--bg-hover-color);
}

.dropdown-menu .divider {
    height: 1px;
    background-color: var(--border-color);
    margin: 5px 0;
}

/* Specific z-index for the memo header menu */
.memo-header .menu-container {
    position: absolute;
    top: 5px;
    right: 5px;
    z-index: 1002; /* Even higher for the trigger button to ensure it's always clickable */
}

.memo-tags {
    margin-top: 15px;
    padding-top: 8px;
    border-top: 1px dashed #514d4d;
}